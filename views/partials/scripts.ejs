<!-- <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script> -->

<script>   

    var ws = new WebSocket('ws://www.seismicportal.eu/standing_order/websocket')

    ws.onopen = () => {
        // websocket connection opened
        console.log('ws opened on browser')

        // keep websocket connection open by sending a message to the server every 5 minutes
        setTimeout(function() {
            ws.send("ping")
            console.log("ws server pinged");
        }, 300000);
    }

    ws.onmessage = (message) => {
        // message from server
        console.log(message.data)
    }

    ws.onclose = (event) => {
        // websocket connection closed
        console.log("ws closed")
        console.log(event);
        ws = new WebSocket('ws://www.seismicportal.eu/standing_order/websocket')
    }


    // when browser is closed or navigates awayw
    window.beforeonunload = function() {
        // disable ws.onclose() function
        ws.onclose = function() {};
        ws.close();
    }


</script>  